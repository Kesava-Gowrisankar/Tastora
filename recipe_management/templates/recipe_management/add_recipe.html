{% extends 'base.html' %}
{% block title %}Add Recipe{% endblock %}
{%load static%}
{% block content %}
<!-- Display Django messages -->
{% if messages %}
  <div class="mb-6 space-y-2 ">
    {% for message in messages %}
      <div
        class="p-3
          {% if message.tags == 'error' %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

<div class="w-full h-full p-4 bg-cover bg-center" 
     style="background-image: url(&quot;{% static 'HomePage/images/veg-cutter.jpg' %}&quot;);">

  <h1 class="text-3xl font-bold  bg-white text-center  px-3 py-2 rounded-full "> Create a <span class="text-orange-400">New</span> Recipe</h1>


  <form method="post" enctype="multipart/form-data" class=" mt-4 grid grid-rows-[repeat(2,1fr)] grid-cols-4  gap-4 p-2 ">
    {% csrf_token %}

    <!-- Recipe form -->
   <div class="font-open row-span-2 col-span-2">{% include "recipe_management/forms/recipe_form.html" with recipeform=recipeform %}</div>
    

    <!-- Nutrition form -->
    <div class="bg-amber-700 p-4 rounded-lg ">
      {% include "recipe_management/forms/nutrition_form.html" with nutritionform=nutritionform %}
    </div>

    <!-- Image form -->
    
      <div class="flex flex-col  space-y-4">
        <span class="text-3xl font-roboto text-blue-600 rounded-full bg-white self-start px-3 py-1">Add Image</span>
        {% include "recipe_management/forms/_image_form.html" with recipe_image=recipe_image %}
      </div>
    

    <!-- Ingredients -->
    <div class="border-t rounded-xl border-gray-300 pt-6 overflow-auto h-full w-full col-span-2 bg-white p-3">
      <h1 class="text-xl font-semibold text-gray-700 mb-3">Ingredients </h1>

      <div class="overflow-hidden">
        <div id="ingredient-list" class=" h-64 overflow-x-auto ">
        {% include "recipe_management/forms/_ingredient_form.html" %}
      </div>
      </div>
      <button type="button"
        hx-get="{% url 'recipe_management:add_ingredient_form' %}"
        hx-target="#ingredient-list"
        hx-swap="beforeend"
        class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition">
        âž• Add Ingredient
      </button>

    </div>

    <!-- Submit -->
    <div class="text-center">
      <button type="submit"
        class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-orange-600 transition">
        Save Recipe
      </button>
    </div>
  </form>
</div>
{% endblock %}
